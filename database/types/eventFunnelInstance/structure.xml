<structure collectionName="eventFunnelInstance" name="eventFunnelInstance">
    <field name="id" pattern="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}|[0-9a-fA-F]{32}" primaryKey="true" type="java.util.UUID"/>
    <field foreignKey="nabu.frameworks.events.database.types.eventFunnel:id" name="eventFunnelId" pattern="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}|[0-9a-fA-F]{32}" type="java.util.UUID"/>
    <field name="started" timezone="UTC" type="java.util.Date"/>
    <field foreignKey="nabu.frameworks.events.database.event:id" name="startEventId" pattern="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}|[0-9a-fA-F]{32}" type="java.util.UUID"/>
    <field comment="The (currently) last event in this funnel" foreignKey="nabu.frameworks.events.database.event:id" name="stopEventId" pattern="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}|[0-9a-fA-F]{32}" type="java.util.UUID"/>
    <field comment="The value of this group" name="groupValue" type="java.lang.String"/>
    <field comment="An optional funnel key to identify this funnel in a readable way. This does not have to be unique." minOccurs="0" name="funnelKey" type="java.lang.String"/>
    <field comment="The current step we are at" name="currentStep" type="java.lang.Long"/>
    <field comment="The max amount of steps currently in the funnel" name="maxSteps" type="java.lang.Long"/>
    <field comment="The percentual completion of the funnel (0-1)" name="completion" type="java.lang.Double"/>
    <field name="priority" type="java.lang.Long"/>
</structure>
