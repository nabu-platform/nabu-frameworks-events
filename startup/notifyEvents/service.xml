<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		disabled="false"
		id="3b1e9f1d-e441-47a9-9995-009fee787ecb">
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="268daf4c7a944b108c6c56f7ed730314">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="5bfc19ae-949a-4fac-b190-f55313855cf6"
				serviceId="nabu.frameworks.events.utils.isSynchronized"
				resultName="resultcf39271006164149a567ffed242aea9f"
				temporaryMapping="true"
				x="86"
				y="72"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="6f7b50ee-1b83-4645-89a3-713498493d4c"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resultcf39271006164149a567ffed242aea9f/synchronized</from>
			<to>synchronized</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="ce733c58-a438-4fde-a546-d5b9b86e52c0"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resultcf39271006164149a567ffed242aea9f/jdbcId</from>
			<to>jdbcId</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
			disabled="false"
			id="7846c404-e249-488b-a060-86e3ce93c4a5"
			query="synchronized">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				disabled="false"
				id="737283c9-12bf-4c11-8c76-8501e3a6cb3f"
				label="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="d73dc183-62b5-4308-acfb-af83e1ab023a"
					serviceId="nabu.utils.Server.log"
					resultName="resultc66d3c873cdf46318bc7e253d6a7c1ea"
					temporaryMapping="true"
					x="51"
					y="71"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="166a01fa-d2b5-4f0d-8855-0f6de313d1ae"
						mask="false"
						optional="false"
						fixedValue="true">
					<from>Either the jdbc pool for events is not configured, or the tables are not synchronized. Disabling event notification.</from>
					<to>message</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="29669dbe-8eb3-43ba-8fa1-d2ebe2c74def"
						mask="false"
						optional="false"
						fixedValue="true">
					<from>WARN</from>
					<to>level</to>
				</steps>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.For"
				disabled="false"
				id="91eec265-176d-449d-a9c6-bb3e1040a35a">
			<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
					disabled="false"
					id="e7e26569-e77e-4fe0-bb37-017fbafc8421">
				<steps xsi:type="be.nabu.libs.services.vm.step.Map"
						comment="We want best effort locking, don't block if you can't, someone else is dealing with it"
						disabled="false"
						id="99097320-ab4f-40a6-839d-c877b51c52ad">
					<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
							disabled="false"
							id="f9554ae1-f430-4101-8138-af0a1975b403"
							serviceId="nabu.utils.Lock.tryLock"
							resultName="result248f7e42fd7b46c99b8e3c59a94c9172"
							temporaryMapping="true"
							x="36"
							y="56"
							invocationOrder="0"
							asynchronous="false"
							recache="false">
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="d961a5eb-2866-4678-be54-e968c01a748d"
								mask="false"
								optional="false"
								fixedValue="true">
							<from>notify-events</from>
							<to>name</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="873aa6b4-7fa5-4a9a-84b4-5eaac1f63d0e"
								mask="false"
								optional="false"
								fixedValue="true">
							<from>false</from>
							<to>local</to>
						</steps>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="23f1abb4-ac15-4e0e-9eed-ba5d4c617554"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>result248f7e42fd7b46c99b8e3c59a94c9172/locked</from>
						<to>locked</to>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
						comment="Only continue if we have the lock"
						disabled="false"
						id="0f419766-a009-4da3-b094-03df76c0303d"
						label="locked">
					<steps xsi:type="be.nabu.libs.services.vm.step.Map"
							comment="Get unnotified events in batches of 1000"
							disabled="false"
							id="ba81a368-9ec5-4acb-ad82-4493c73d3d81">
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Finally"
							disabled="false"
							id="9bbb3462-02f3-4503-b666-3c8f73e40dd2">
						<steps xsi:type="be.nabu.libs.services.vm.step.Map"
								disabled="false"
								id="8e0ee8ce-25a8-4c54-9250-29b9954d0a79">
							<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
									disabled="false"
									id="c5ba326d-e50b-48c3-8edc-b2f7c5c812a9"
									serviceId="nabu.utils.Lock.unlock"
									resultName="result5560234793f74e52b43ca55ead9ea137"
									temporaryMapping="true"
									x="84"
									y="143"
									invocationOrder="0"
									asynchronous="false"
									recache="false">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="845dc104-dc7e-4fbd-98c7-244942bb2535"
										mask="false"
										optional="false"
										fixedValue="true">
									<from>notify-events</from>
									<to>name</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="789333ad-9515-4283-86c3-6fe0a2a2347d"
										mask="false"
										optional="false"
										fixedValue="true">
									<from>false</from>
									<to>local</to>
								</steps>
							</steps>
						</steps>
					</steps>
				</steps>
			</steps>
			<query>true</query>
		</steps>
	</steps>
</sequence>